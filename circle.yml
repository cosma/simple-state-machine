machine:
  timezone:
    Europe/Berlin
  php:
    version: 5.4.9

dependencies:
  cache_directories:
    - "vendor"
  pre:
    - wget -O graphviz.tar.gz --quiet http://www.graphviz.org/pub/graphviz/stable/SOURCES/graphviz-working.tar.gz
    - tar -zxf graphviz.tar.gz
    - mv graphviz* graphviz
    - graphviz/configure --silent
    - make --silent --ignore-errors && make --silent --ignore-errors install > /dev/nul'
    - echo 'which dot && version:'
    - which dot
    - dot -V
    - sudo composer self-update
    - composer install --prefer-source --no-interaction

test:
  override:
    - vendor/phpunit/phpunit/phpunit  tests
